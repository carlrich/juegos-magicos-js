<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Detective de Objetos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Fredoka', sans-serif;
      background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
    }
    
    /* Animaci√≥n de entrada suave */
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Animaci√≥n para los objetos flotando */
    .float-item {
      transition: transform 0.2s;
    }
    .float-item:hover {
      transform: scale(1.2) rotate(10deg) !important;
      z-index: 10;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 bg-blue-50">

  <div class="max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden fade-in border-4 border-white">
    
    <div class="bg-indigo-600 p-6 text-white flex justify-between items-center">
      <div>
        <h1 class="text-3xl font-bold">üîç Detective Visual</h1>
        <p class="text-indigo-200 text-sm">Nivel <span id="nivel-indicador">1</span></p>
      </div>
      <a href="../index.html" class="bg-indigo-500 hover:bg-indigo-700 px-4 py-2 rounded-lg text-sm transition">
        ‚¨Ö Salir
      </a>
    </div>

    <div class="p-8 flex flex-col md:flex-row gap-8">
      
      <div class="flex-1 bg-gray-100 rounded-2xl p-6 relative shadow-inner min-h-[400px] flex items-center justify-center">
        <div id="tablero" class="grid grid-cols-5 gap-4 w-full h-full content-center justify-items-center"></div>
      </div>

      <div class="md:w-1/3 flex flex-col justify-center space-y-6">
        
        <div class="bg-indigo-50 p-6 rounded-2xl border-2 border-indigo-100 text-center">
          <p class="text-gray-500 mb-2 uppercase tracking-wide text-xs font-bold">Misi√≥n Actual</p>
          <div class="text-6xl mb-4 animate-bounce" id="icono-objetivo">üçé</div>
          <h2 class="text-xl text-gray-800 font-bold">¬øCu√°ntos ves?</h2>
          <p class="text-gray-600 text-sm" id="texto-pregunta">Encuentra todas las manzanas rojas</p>
        </div>

        <div class="flex flex-col gap-3">
          <input type="number" id="input-respuesta" placeholder="0" class="text-center text-3xl p-4 rounded-xl border-2 border-gray-300 focus:border-indigo-500 focus:outline-none transition font-bold text-indigo-600">
          
          <button onclick="verificar()" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition active:scale-95">
            ¬°Responder! ‚ú®
          </button>
        </div>
        
      </div>
    </div>
  </div>

  <script>
    // --- CONFIGURACI√ìN DEL JUEGO ---
    
    // Aqu√≠ definimos los "temas". Puedes agregar todos los que quieras.
    const temas = [
      {
        nombre: "Granja",
        objetos: ["üêÆ", "üê∑", "üêî", "üêë", "üê¥", "üê•"], // Emojis disponibles
        fondo: "bg-green-100" // Clase de Tailwind opcional
      },
      {
        nombre: "Fruter√≠a",
        objetos: ["üçé", "üçå", "üçá", "üçä", "üçì", "üçâ", "üçí", "üçç"],
        fondo: "bg-yellow-50"
      },
      {
        nombre: "Oc√©ano",
        objetos: ["üêô", "üê≥", "ü¶Ä", "üê¨", "üê†", "üê°", "ü¶à"],
        fondo: "bg-blue-100"
      },
      {
        nombre: "Jard√≠n",
        objetos: ["üåπ", "üåª", "üå∑", "üåº", "üå∏", "üå∫", "üåµ"],
        fondo: "bg-pink-50"
      },
       {
        nombre: "Espacio",
        objetos: ["üöÄ", "‚≠ê", "üåô", "üåç", "üõ∏", "‚òÑÔ∏è"],
        fondo: "bg-slate-900"
      }
    ];

    let nivelActual = 1;
    let respuestaCorrecta = 0;
    
    // Iniciar juego
    cargarNivel();

    function cargarNivel() {
      // 1. Elegir un tema aleatorio
      const tema = temas[Math.floor(Math.random() * temas.length)];
      
      // 2. Elegir qui√©n ser√° el "protagonista" (lo que hay que contar)
      const indiceProtagonista = Math.floor(Math.random() * tema.objetos.length);
      const protagonista = tema.objetos[indiceProtagonista];
      
      // 3. Crear lista de distractores (todos los del tema menos el protagonista)
      const distractores = tema.objetos.filter(obj => obj !== protagonista);

      // 4. Determinar cu√°ntos protagonistas habr√° (entre 3 y 9 para que no sea muy dif√≠cil ni muy f√°cil)
      respuestaCorrecta = Math.floor(Math.random() * 7) + 3; // Aleatorio entre 3 y 9
      
      // 5. Rellenar el resto del tablero con distractores
      // Supongamos un tablero de 25 espacios (5x5)
      const totalEspacios = 25; 
      const cantidadDistractores = totalEspacios - respuestaCorrecta;
      
      let elementosTablero = [];
      
      // A√±adir protagonistas
      for(let i=0; i<respuestaCorrecta; i++) elementosTablero.push(protagonista);
      
      // A√±adir distractores aleatorios
      for(let i=0; i<cantidadDistractores; i++) {
        const distractorRandom = distractores[Math.floor(Math.random() * distractores.length)];
        elementosTablero.push(distractorRandom);
      }
      
      // 6. Mezclar el array para que est√©n desordenados
      elementosTablero.sort(() => Math.random() - 0.5);

      // --- RENDERIZADO ---
      
      // Actualizar UI Pregunta
      document.getElementById('icono-objetivo').innerText = protagonista;
      document.getElementById('texto-pregunta').innerText = `Cuenta: ${protagonista}`;
      document.getElementById('nivel-indicador').innerText = nivelActual;
      document.getElementById('input-respuesta').value = '';
      document.getElementById('input-respuesta').focus();

      // Renderizar tablero
      const tablero = document.getElementById('tablero');
      tablero.innerHTML = ''; // Limpiar anterior
      
      elementosTablero.forEach(item => {
        const div = document.createElement('div');
        div.innerText = item;
        
        // Estilos aleatorios para que se vea "org√°nico" y profesional
        // Variaci√≥n de tama√±o y rotaci√≥n
        const randomSize = Math.floor(Math.random() * (50 - 35 + 1)) + 35; // Entre 35px y 50px
        const randomRotate = Math.floor(Math.random() * 60) - 30; // Entre -30 y 30 grados
        
        div.style.fontSize = `${randomSize}px`;
        div.style.transform = `rotate(${randomRotate}deg)`;
        div.className = "cursor-default select-none float-item drop-shadow-md";
        
        tablero.appendChild(div);
      });
    }

    function verificar() {
      const input = document.getElementById('input-respuesta');
      const valorUsuario = parseInt(input.value);

      if (isNaN(valorUsuario)) {
        Swal.fire({
            icon: 'warning',
            title: '¬°Ups!',
            text: 'Escribe un n√∫mero primero üòâ',
            confirmButtonColor: '#4f46e5'
        });
        return;
      }

      if (valorUsuario === respuestaCorrecta) {
        // ¬°ACIERTO!
        Swal.fire({
          title: '¬°Excelente! üéâ',
          text: `¬°Exacto! Hab√≠a ${respuestaCorrecta} objetos.`,
          icon: 'success',
          confirmButtonText: 'Siguiente Nivel ‚û°',
          confirmButtonColor: '#4f46e5',
          backdrop: `
            rgba(0,0,123,0.4)
            url("https://media.giphy.com/media/26tOZ42Mg6pbTUPvy/giphy.gif")
            left top
            no-repeat
          `
        }).then(() => {
          nivelActual++;
          cargarNivel();
        });
      } else {
        // ERROR
        let mensaje = valorUsuario < respuestaCorrecta ? "Mmm... creo que hay m√°s." : "¬°Te pasaste! Hay menos.";
        
        Swal.fire({
          icon: 'error',
          title: 'Casi casi...',
          text: mensaje + ' Vuelve a contar üëÄ',
          confirmButtonColor: '#ef4444'
        });
        
        // Efecto visual de error en el input
        input.classList.add('bg-red-100', 'animate-pulse');
        setTimeout(() => input.classList.remove('bg-red-100', 'animate-pulse'), 500);
      }
    }

    // Permitir presionar Enter para enviar
    document.getElementById("input-respuesta").addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        verificar();
      }
    });

  </script>
</body>
</html>