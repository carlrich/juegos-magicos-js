<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Veo Veo... Â¿QuÃ© ves?</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Fredoka', sans-serif; }

    /* Fondo de parque/jardÃ­n suave */
    .garden-bg {
      background-color: #f0fdf4; /* Verde muy claro */
      background-image: radial-gradient(#bbf7d0 2px, transparent 2px);
      background-size: 30px 30px;
    }

    /* Tarjeta de Imagen */
    .image-option {
      background: white;
      border-radius: 20px;
      padding: 15px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.05);
      border: 4px solid #dcfce7; /* Borde verde suave */
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      aspect-ratio: 1 / 1; /* Mantenerlas cuadradas */
    }
    .image-option:hover {
      transform: translateY(-8px) scale(1.03);
      border-color: #22c55e;
      box-shadow: 0 15px 25px rgba(34, 197, 94, 0.15);
    }
    .image-option:active { transform: scale(0.95); }
    .image-option img {
      width: 90%; height: 90%; object-fit: contain; pointer-events: none;
    }

    /* AnimaciÃ³n de entrada */
    .pop-in { animation: pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; opacity: 0; transform: scale(0.5); }
    @keyframes pop { to { opacity: 1; transform: scale(1); } }

    /* AnimaciÃ³n de error (temblor) */
    .shake-error { animation: shake 0.5s; border-color: #ef4444 !important; background-color: #fef2f2; }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }

  </style>
</head>

<body class="garden-bg min-h-screen flex flex-col items-center p-4">

  <div class="w-full max-w-4xl flex justify-between items-center mb-8 mt-4 bg-white/80 p-4 rounded-2xl shadow-sm backdrop-blur border-2 border-green-100">
    <a href="../index.html" class="text-slate-500 hover:text-green-600 font-bold flex items-center gap-2 transition text-sm">
      â¬… Salir
    </a>
    <div class="bg-green-100 text-green-700 px-6 py-2 rounded-full font-bold text-xl shadow-inner">
      Nivel <span id="levelDisplay">1</span>
    </div>
    <div class="w-10"></div>
  </div>

  <main class="flex flex-col items-center w-full max-w-4xl">
    
    <div class="text-center mb-10 animate-bounce" style="animation-duration: 2s;">
      <h1 class="text-4xl md:text-5xl font-bold text-green-700 mb-2 drop-shadow-sm">
        ðŸ‘€ Veo veo...
      </h1>
      <h2 id="clueText" class="text-3xl md:text-4xl font-bold text-slate-700 bg-white/70 px-8 py-3 rounded-full inline-block shadow-sm border-b-4 border-green-200">
        </h2>
    </div>

    <div id="optionsGrid" class="grid grid-cols-3 gap-4 md:gap-8 w-full max-w-2xl px-4">
      </div>

  </main>

  <script>
    // --- SONIDOS ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playSound(type) {
      if (audioCtx.state === 'suspended') audioCtx.resume();
      const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
      osc.connect(gain); gain.connect(audioCtx.destination);
      const now = audioCtx.currentTime;
      if (type === 'success') {
        osc.type = 'triangle'; osc.frequency.setValueAtTime(500, now); osc.frequency.linearRampToValueAtTime(800, now + 0.2);
        gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0.01, now + 0.3); osc.start(now); osc.stop(now + 0.3);
      } else if (type === 'error') {
        osc.type = 'sawtooth'; osc.frequency.setValueAtTime(200, now); osc.frequency.linearRampToValueAtTime(150, now + 0.2);
        gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0.01, now + 0.2); osc.start(now); osc.stop(now + 0.2);
      }
    }

    // --- DATOS DE LOS NIVELES ---
    const levels = [
      {
        clue: "Un insecto",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/12912/12912996.png", isCorrect: true }, // Abeja
          { img: "https://cdn-icons-png.flaticon.com/128/8794/8794537.png", isCorrect: false }, // Cerdo
          { img: "https://cdn-icons-png.flaticon.com/128/13853/13853987.png", isCorrect: false }  // Queso
        ]
      },
      {
        clue: "Una niÃ±a rubia",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/2570/2570187.png", isCorrect: false }, // NiÃ±a pelo marrÃ³n
          { img: "https://cdn-icons-png.flaticon.com/128/5642/5642021.png", isCorrect: true },  // NiÃ±a rubia
          { img: "https://cdn-icons-png.flaticon.com/128/6530/6530946.png", isCorrect: false }  // NiÃ±o
        ]
      },
      {
        clue: "Un objeto que usan los bebÃ©s",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/1227/1227227.png", isCorrect: true }, // Chupete
          { img: "https://cdn-icons-png.flaticon.com/128/595/595737.png", isCorrect: false }, // Martillo
          { img: "https://cdn-icons-png.flaticon.com/128/1865/1865273.png", isCorrect: false }  // Ordenador
        ]
      },
      {
        clue: "Un personaje de Halloween",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/685/685844.png", isCorrect: true }, // Calabaza
          { img: "https://cdn-icons-png.flaticon.com/128/2299/2299172.png", isCorrect: false }, // Ãrbol Navidad
          { img: "https://cdn-icons-png.flaticon.com/128/4337/4337076.png", isCorrect: false }  // Huevo Pascua
        ]
      },
      {
        clue: "Un juguete",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/14465/14465166.png", isCorrect: false }, // BrÃ³coli
          { img: "https://cdn-icons-png.flaticon.com/128/3662/3662817.png", isCorrect: true },  // Robot
          { img: "https://cdn-icons-png.flaticon.com/128/1521/1521237.png", isCorrect: false }  // ChampÃº
        ]
      },
      {
        clue: "Una verdura",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/8323/8323889.png", isCorrect: true }, // Zanahoria
          { img: "https://cdn-icons-png.flaticon.com/128/448/448003.png", isCorrect: false }, // Pastel
          { img: "https://cdn-icons-png.flaticon.com/128/860/860895.png", isCorrect: false }  // Zapato
        ]
      },
      {
        clue: "Instrumento musical",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/2816/2816775.png", isCorrect: true }, // Guitarra
          { img: "https://cdn-icons-png.flaticon.com/128/2447/2447668.png", isCorrect: false }, // Cuchara
          { img: "https://cdn-icons-png.flaticon.com/128/10473/10473628.png", isCorrect: false }  // LÃ¡piz
        ]
      },
      {
        clue: "Una prenda que se pone en los pies",
        options: [
          { img: "https://cdn-icons-png.flaticon.com/128/9034/9034662.png", isCorrect: true }, // Calcetines
          { img: "https://cdn-icons-png.flaticon.com/128/2790/2790087.png", isCorrect: false }, // Sombrero
          { img: "https://cdn-icons-png.flaticon.com/128/2117/2117472.png", isCorrect: false }  // Guantes
        ]
      },
      {
        clue: "Un objeto de baÃ±o",
        options: [
          { img: "https://avicoladeseleccion.es/1573/75.jpg", isCorrect: false }, // Pato (animal real)
          { img: "https://cdn-icons-png.flaticon.com/128/1746/1746358.png", isCorrect: true },  // Patito de goma
          { img: "https://cdn-icons-png.flaticon.com/128/1839/1839375.png", isCorrect: false }  // Almohada
        ]
      }
    ];

    let currentLevelIdx = 0;
    let canClick = true;

    // --- INICIALIZAR NIVEL ---
    function loadLevel() {
      const grid = document.getElementById('optionsGrid');
      document.getElementById('levelDisplay').innerText = currentLevelIdx + 1;
      document.getElementById('clueText').innerText = levels[currentLevelIdx].clue;
      grid.innerHTML = "";
      canClick = true;

      // Barajar opciones
      const shuffledOptions = [...levels[currentLevelIdx].options].sort(() => Math.random() - 0.5);

      shuffledOptions.forEach((option, index) => {
        const card = document.createElement('div');
        card.className = 'image-option pop-in';
        card.style.animationDelay = `${index * 100}ms`;
        card.innerHTML = `<img src="${option.img}">`;

        card.addEventListener('click', () => handleSelection(card, option.isCorrect));
        grid.appendChild(card);
      });
    }

    // --- MANEJO DEL CLIC ---
    function handleSelection(cardElement, isCorrect) {
      if (!canClick) return;

      if (isCorrect) {
        // CORRECTO
        canClick = false;
        playSound('success');
        cardElement.style.borderColor = "#22c55e"; // Verde intenso
        cardElement.style.backgroundColor = "#dcfce7";
        confetti({ particleCount: 100, spread: 60, origin: { y: 0.7 } });

        setTimeout(() => {
          currentLevelIdx++;
          if (currentLevelIdx < levels.length) {
            loadLevel();
          } else {
            victory();
          }
        }, 1500);

      } else {
        // INCORRECTO
        playSound('error');
        cardElement.classList.add('shake-error');
        // Quitar la animaciÃ³n al terminar para poder volver a fallar
        setTimeout(() => cardElement.classList.remove('shake-error'), 500);
      }
    }

    function victory() {
      Swal.fire({
        title: "Â¡QuÃ© buena vista! ðŸ‘€âœ¨",
        text: "Has encontrado todas las cosas.",
        icon: "success",
        confirmButtonText: "Volver al MenÃº",
        confirmButtonColor: "#22c55e",
        padding: '2em',
        backdrop: `rgba(34,197,94,0.2)`
      }).then(() => window.location.href = "../index.html");
    }

    // Iniciar
    loadLevel();
  </script>
</body>
</html>